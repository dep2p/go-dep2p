# 单产品深度分析索引

> **分析产品**: iroh、go-libp2p、torrent  
> **分析日期**: 2026-01-11

---

## 1. 概述

本目录包含对三个 P2P 产品的深度分析文档。

---

## 2. 产品分析

| 产品 | 文档 | 重点分析 |
|------|------|----------|
| **iroh** | [iroh.md](iroh.md) | 架构、Relay、NAT、身份设计 |
| **go-libp2p** | [libp2p.md](libp2p.md) | 模块化、协议抽象、发现机制 |
| **torrent** | [torrent.md](torrent.md) | DHT、Peer 发现 |

---

## 3. 产品基本信息

| 属性 | iroh | go-libp2p | torrent |
|------|------|-----------|---------|
| **组织** | n0 (Number 0) | Protocol Labs | @anacrolix |
| **语言** | Rust | Go | Go |
| **许可** | MIT/Apache | MIT | MIT |
| **定位** | 现代 P2P 网络库 | 模块化协议栈 | BitTorrent 库 |

---

## 4. 核心特性对比

| 特性 | iroh | go-libp2p | torrent |
|------|------|-----------|---------|
| **架构模式** | 功能聚焦 | 技术层次栈 | 扁平模块 |
| **QUIC** | ✅ 核心 | ✅ 支持 | ❌ |
| **Relay** | ✅ | ✅ (Circuit v2) | ❌ |
| **DHT** | ✅ (Pkarr) | ✅ (Kademlia) | ✅ (Mainline) |
| **NAT 穿透** | ✅ | ✅ | ✅ (弱) |
| **域隔离** | ❌ | ❌ | ❌ |

---

## 5. 分析维度

每个产品按以下六个维度进行分析：

```mermaid
flowchart LR
    ARCH[架构层] --> PROTO[协议层]
    PROTO --> TRANS[传输层]
    TRANS --> NET[网络层]
    NET --> SEC[安全层]
    SEC --> API[接口层]
```

### 维度说明

| 维度 | 关注点 |
|------|--------|
| **架构层** | 整体架构、模块划分、依赖关系 |
| **协议层** | 协议设计、消息格式、版本管理 |
| **传输层** | 传输协议、连接管理、Relay 设计 |
| **网络层** | 节点发现、NAT 穿透、路由 |
| **安全层** | 身份设计、加密传输、认证机制 |
| **接口层** | API 设计、配置方式、扩展性 |

---

## 6. 对 DeP2P 的总体启示

### 6.1 架构模式借鉴

| 项目 | 架构模式 | DeP2P 借鉴点 |
|------|----------|--------------|
| **go-libp2p** | 技术层次栈 | 按协议栈分层（protocol → host → net → transport → security） |
| **iroh** | 功能聚焦 | MagicSock 传输抽象、极简 API |
| **torrent** | 扁平模块 | 功能导向的模块组织 |

**DeP2P 建议**：参考 go-libp2p 的技术层次分层，Realm 作为协议层模块而非独立"业务域"

### 6.2 可借鉴点

| 来源 | 借鉴内容 | 优先级 |
|------|----------|--------|
| **iroh** | MagicSock、Home Relay、自动升级 | ⭐⭐⭐ |
| **go-libp2p** | 模块化设计、协议抽象、接口定义 | ⭐⭐⭐ |
| **torrent** | DHT 实现、多发现机制并行 | ⭐⭐ |

### 6.3 DeP2P 差异化

| 特性 | DeP2P 设计 | 参考来源 |
|------|------------|----------|
| **Realm 隔离** | PSK 隔离的域 | 创新 |
| **统一 Relay** | v2.0 缓存加速层 | 优化 |
| **控制/数据分离** | 明确分离 | 创新 |
| **NodeID** | SHA256(PublicKey) | libp2p 变体 |

---

## 7. 相关文档

- [跨产品对比分析](../comparison/README.md)
- [参考研究规范](../README.md)

---

**最后更新**：2026-01-13
