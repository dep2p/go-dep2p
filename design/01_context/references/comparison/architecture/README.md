# 架构层对比分析

> **对比产品**: iroh、go-libp2p、torrent  
> **分析日期**: 2026-01-11

---

## 文档索引

| 文档 | 描述 | 状态 |
|------|------|------|
| [01-overall.md](01-overall.md) | 整体架构对比 | ✅ |

---

## 分析维度

### 1. 整体架构 (01-overall.md)

- **产品定位对比**：定位、语言、许可、成熟度
- **设计理念对比**：核心理念、设计哲学
- **分层架构对比**：各产品的架构分层
- **核心模块对比**：入口、连接、流、发现等
- **代码组织对比**：目录结构、代码规模
- **设计模式对比**：使用的设计模式
- **生命周期管理**：启动/关闭流程

---

## 关键对比

### 架构分层

```mermaid
flowchart TB
    subgraph iroh[iroh: 3 层]
        I1[API 层]
        I2[核心层]
        I3[传输层]
        I1 --> I2 --> I3
    end
    
    subgraph libp2p[go-libp2p: 5 层]
        L1[应用层]
        L2[Host 层]
        L3[网络层]
        L4[安全层]
        L5[传输层]
        L1 --> L2 --> L3 --> L4 --> L5
    end
    
    subgraph torrent[torrent: 4 层]
        T1[API 层]
        T2[Peer 层]
        T3[发现层]
        T4[存储层]
        T1 --> T2 --> T3
        T1 --> T4
    end
```

### 对比结论

| 维度 | iroh | go-libp2p | torrent |
|------|------|-----------|---------|
| **复杂度** | 简洁 | 复杂 | 中等 |
| **灵活性** | 中等 | 高 | 低 |
| **可扩展性** | 中等 | 高 | 低 |
| **学习曲线** | 低 | 高 | 低 |

---

## DeP2P 建议

1. 采用 4-5 层架构
2. 借鉴 go-libp2p 的模块化
3. 采用 iroh 的 MagicSock 抽象
4. 增加 Realm 管理层

---

**更新日期**：2026-01-11
