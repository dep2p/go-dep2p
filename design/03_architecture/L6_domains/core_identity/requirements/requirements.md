# core_identity 需求

> 需求追溯与规格说明

---

## 功能需求

### FR-ID-001: 密钥对生成

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能生成 Ed25519 密钥对 |
| 优先级 | P0 |
| 验收标准 | 生成的密钥对符合 Ed25519 规范 |

### FR-ID-002: NodeID 派生

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能从公钥派生 NodeID |
| 优先级 | P0 |
| 验收标准 | NodeID = SHA-256(PublicKey)，长度 32 字节 |

### FR-ID-003: 签名操作

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能使用私钥签名数据 |
| 优先级 | P0 |
| 验收标准 | 签名可通过公钥验证 |

### FR-ID-004: 签名验证

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能使用公钥验证签名 |
| 优先级 | P0 |
| 验收标准 | 正确验证有效签名，拒绝无效签名 |

### FR-ID-005: 身份持久化

| 属性 | 说明 |
|------|------|
| 描述 | 系统应支持身份的导入导出 |
| 优先级 | P1 |
| 验收标准 | 导出后可重新导入，身份保持一致 |

---

## 非功能需求

### NFR-ID-001: 安全性

| 属性 | 说明 |
|------|------|
| 描述 | 私钥不得泄露到日志或错误消息 |
| 验收标准 | 代码审查确认无私钥泄露风险 |

### NFR-ID-002: 性能

| 属性 | 说明 |
|------|------|
| 描述 | 签名操作应在 1ms 内完成 |
| 验收标准 | 基准测试通过 |

---

## 需求追溯

| 需求 | 来源 | 不变量 |
|------|------|--------|
| FR-ID-002 | INV-001 身份第一性 | 连接必须绑定 NodeID |
| FR-ID-003/004 | 协议安全要求 | 消息可验证来源 |

---

**最后更新**：2026-01-11
