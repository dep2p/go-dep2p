# core_nat 需求

> 需求追溯与规格说明

---

## 功能需求

### FR-NAT-001: NAT 类型检测

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能检测本机 NAT 类型 |
| 优先级 | P0 |
| 验收标准 | 正确识别 NAT 类型 |

### FR-NAT-002: 外部地址获取

| 属性 | 说明 |
|------|------|
| 描述 | 系统应能通过 STUN 获取外部地址 |
| 优先级 | P0 |
| 验收标准 | 返回正确的外部 IP:Port |

### FR-NAT-003: UPnP 端口映射

| 属性 | 说明 |
|------|------|
| 描述 | 系统应支持 UPnP 端口映射 |
| 优先级 | P1 |
| 验收标准 | 成功建立端口映射 |

### FR-NAT-004: Hole Punching

| 属性 | 说明 |
|------|------|
| 描述 | 系统应支持 UDP 打洞 |
| 优先级 | P0 |
| 验收标准 | 两个 NAT 后节点可直连 |

---

## 非功能需求

### NFR-NAT-001: 打洞成功率

| 属性 | 说明 |
|------|------|
| 描述 | 对称 NAT 外打洞成功率 > 80% |
| 验收标准 | 测试验证 |

---

**最后更新**：2026-01-11
