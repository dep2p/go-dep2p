# REQ-{DOMAIN}-{NNNN}: 需求标题

> 模板版本: v1.0

---

## 元信息

| 字段 | 值 |
|------|-----|
| **ID** | REQ-{DOMAIN}-{NNNN} |
| **状态** | draft / approved / implemented / tested / deprecated |
| **Owner** | @xxx |
| **创建日期** | YYYY-MM-DD |
| **更新日期** | YYYY-MM-DD |
| **版本** | v0.1.0 |

---

## 追溯链

| 关联类型 | ID | 说明 |
|----------|-----|------|
| **测试用例** | TST-{DOMAIN}-{NNNN} | [必填] 至少关联一条 |
| **代码位置** | `internal/core/xxx/` | [必填] 实现代码路径 |
| **协议规范** | `02_constraints/protocol/xxx.md` | 对应规范章节 |
| **ADR** | ADR-{NNNN} | 可选 |

---

## 1. 背景与动机

[必填] 描述为什么需要这个需求，解决什么问题。

### 问题描述

当前存在的问题...

### 目标

通过本需求要达成的目标...

---

## 2. 范围

[必填] 定义本需求的范围边界。

### 范围内（In Scope）

- 功能点 1
- 功能点 2

### 范围外（Out of Scope）

- 不包含的功能点 1
- 不包含的功能点 2

---

## 3. 术语

[可选] 本需求涉及的专有术语定义。

| 术语 | 定义 |
|------|------|
| 术语 A | 定义... |

---

## 4. 规则与约束

[必填] 详细描述需求的规则和约束。

### 规则 1: 规则名称

**描述**: 规则的详细描述...

**示例**:

```
输入: xxx
输出: xxx
```

---

## 5. 错误码

[必填] 列出本需求涉及的错误码。

| 错误码 | 名称 | 说明 | 触发条件 |
|--------|------|------|----------|
| E{NNNN} | ErrXxx | 错误说明 | 触发条件 |

---

## 6. 不变量

[必填] 列出本需求必须保证的不变量。

| 不变量 ID | 描述 |
|-----------|------|
| INV-{DOMAIN}-{NNN} | 不变量描述... |

---

## 7. 兼容性

[必填] 分析本需求对兼容性的影响。

### 协议兼容

- [ ] 无影响
- [ ] 向后兼容
- [ ] 破坏性变更（需提供迁移方案）

### API 兼容

- [ ] 无影响
- [ ] 向后兼容
- [ ] 破坏性变更（需提供迁移方案）

---

## 8. 验收标准

[必填] 列出验收标准，每条关联测试用例。

| # | 验收标准 | 测试用例 |
|---|----------|----------|
| 1 | 当 xxx 时，应 xxx | TST-{DOMAIN}-{NNNN} |
| 2 | 当 xxx 时，应 xxx | TST-{DOMAIN}-{NNNN} |

---

## 9. 参考

- 相关文档链接
- 相关 Issue/PR

---

## 变更历史

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|----------|
| v0.1.0 | YYYY-MM-DD | @xxx | 初始版本 |
