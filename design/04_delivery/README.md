# 交付保障 (Delivery)

> 怎么保障：测试策略、发布流程、安全防护

---

## 目录结构

```
04_delivery/
├── README.md              # 本文件
├── testing/               # 测试策略与用例
│   ├── README.md
│   ├── strategy/          # 测试策略
│   ├── cases/             # 测试用例
│   ├── benchmarking/      # 性能基准
│   └── chaos/             # 混沌测试
├── release/               # 发布流程
│   ├── README.md
│   ├── versioning/        # 版本策略
│   ├── process/           # 发布流程
│   └── publishing/        # 发布产物
└── security/              # 安全防护
    ├── README.md
    ├── threat_model.md    # 威胁模型
    └── audits/            # 安全审计
```

---

## 测试策略

### 测试金字塔

```
           ┌─────────────┐
           │   E2E 测试   │  ← 少量关键路径
          ─┼─────────────┼─
         ┌─┴─────────────┴─┐
         │   集成测试       │  ← 模块间交互
        ─┼─────────────────┼─
       ┌─┴─────────────────┴─┐
       │      单元测试        │  ← 大量基础测试
       └─────────────────────┘
```

### 覆盖率要求

| 类别 | 要求 | 说明 |
|------|------|------|
| 核心模块 | ≥ 80% | `internal/core/` |
| 公共接口 | ≥ 90% | `pkg/interfaces/` |
| 工具包 | ≥ 70% | `internal/util/` |

---

## 发布流程

### 版本策略

遵循语义化版本（SemVer）：

```
MAJOR.MINOR.PATCH
  │     │     │
  │     │     └── 修复 Bug，向后兼容
  │     └── 新功能，向后兼容
  └── 重大变更，可能不兼容
```

### 发布渠道

| 渠道 | 说明 | 稳定性 |
|------|------|--------|
| `stable` | 正式发布 | ⭐⭐⭐ |
| `rc` | 候选版本 | ⭐⭐ |
| `alpha` | 早期测试 | ⭐ |

---

## 安全防护

### 安全原则

| 原则 | 说明 |
|------|------|
| **最小权限** | 组件只获取必要的权限 |
| **默认安全** | 安全选项应为默认 |
| **深度防御** | 多层安全机制 |
| **安全审计** | 定期安全评估 |

### 威胁模型

主要威胁类别：

- **身份伪造**：伪造 NodeID
- **中间人攻击**：拦截通信
- **拒绝服务**：资源耗尽攻击
- **信息泄露**：敏感数据暴露

---

## 快速链接

| 目录 | 说明 |
|------|------|
| [testing/](testing/) | 测试策略与用例 |
| [release/](release/) | 发布流程 |
| [security/](security/) | 安全防护 |

---

**最后更新**：2026-01-11
