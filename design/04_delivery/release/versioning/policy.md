# 版本策略详情

> 语义化版本规范、兼容性承诺

---

## 1. 语义化版本

DeP2P 遵循 [Semantic Versioning 2.0.0](https://semver.org/) 规范。

### 版本号结构

```
MAJOR.MINOR.PATCH[-PRERELEASE]
  │     │     │        │
  │     │     │        └── 预发布标识（可选）
  │     │     └── 补丁版本：向后兼容的 Bug 修复
  │     └── 次版本：向后兼容的新功能
  └── 主版本：不兼容的 API 变更
```

---

## 2. 变更分类

### 破坏性变更 (MAJOR)

- 删除公共 API
- 修改 API 签名
- 修改默认行为
- 协议不兼容

### 新功能 (MINOR)

- 新增公共 API
- 新增配置项（有默认值）
- 新协议支持
- 性能优化

### Bug 修复 (PATCH)

- Bug 修复
- 安全修复
- 文档修复

---

## 3. 预发布版本

### 命名规则

```
v{MAJOR}.{MINOR}.{PATCH}-{stage}.{n}

v2.0.0-alpha.1   # 第一个 alpha
v2.0.0-beta.1    # 第一个 beta
v2.0.0-rc.1      # 第一个候选
v2.0.0           # 正式发布
```

### 阶段定义

| 阶段 | API 稳定性 | 功能完整性 |
|------|------------|------------|
| alpha | 可能变化 | 开发中 |
| beta | 基本稳定 | 完整 |
| rc | 稳定 | 完整 |

---

## 4. 兼容性承诺

### 稳定版本 (v1.0.0+)

| 方面 | 承诺 |
|------|------|
| 公共 API | 次版本内向后兼容 |
| 配置格式 | 次版本内向后兼容 |
| 协议版本 | 次版本内向后兼容 |

### 开发版本 (v0.x.x)

| 方面 | 承诺 |
|------|------|
| 公共 API | 可能在任何版本变更 |
| 配置格式 | 可能在任何版本变更 |

---

## 5. Go 模块版本

```go
// v0.x.x 和 v1.x.x
import "github.com/dep2p/go-dep2p"

// v2.x.x 及以后
import "github.com/dep2p/go-dep2p/v2"
```

---

**最后更新**：2026-01-29
