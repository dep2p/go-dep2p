# 文档标准

> 定义 DeP2P 项目的文档编写规范

---

## 文档原则

```
┌─────────────────────────────────────────────────────────────┐
│                    文档原则                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  完整性                                                     │
│  ──────                                                     │
│  覆盖必要信息                                               │
│                                                             │
│  准确性                                                     │
│  ──────                                                     │
│  与代码保持同步                                              │
│                                                             │
│  可读性                                                     │
│  ──────                                                     │
│  结构清晰，易于理解                                          │
│                                                             │
│  可维护性                                                   │
│  ────────                                                   │
│  易于更新                                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 文档类型

### 分类

| 类型 | 位置 | 受众 |
|------|------|------|
| README | 各目录 | 所有人 |
| API 文档 | 代码注释 | 开发者 |
| 设计文档 | design/ | 架构师 |
| 使用指南 | docs/ | 用户 |

---

## README 规范

### 必备章节

```
README 结构：

  # 包名/模块名
  
  > 一句话描述
  
  ## 概述
  详细说明
  
  ## 快速开始
  使用示例
  
  ## API
  主要接口说明
  
  ## 配置
  配置项说明
  
  ## 相关文档
  链接到其他文档
```

### README 模板

```markdown
# 包名

> 简短描述包的用途

---

## 概述

详细描述包的功能和职责。

---

## 安装

如何安装或引入（如适用）。

---

## 快速开始

```伪代码
// 简单使用示例
```

---

## API

### 主要接口

| 接口 | 说明 |
|------|------|
| xxx | yyy |

---

## 相关文档

- [相关文档1](链接)
- [相关文档2](链接)
```

---

## 代码注释

### 包注释

```
包注释规范：

  位置：
    doc.go 或主文件顶部
    
  内容：
    Package xxx 提供 yyy 功能。
    
    详细描述...
    
    示例用法...
```

### 类型注释

```
类型注释规范：

  格式：
    // TypeName 是/表示/管理...
    //
    // 详细说明（可选）
    
  示例：
    // ConnectionManager 管理节点的所有连接。
    //
    // 它负责连接的建立、维护和关闭，
    // 以及连接池的管理。
```

### 函数注释

```
函数注释规范：

  格式：
    // FuncName 执行/返回/创建...
    //
    // 参数说明（如需要）
    // 返回值说明（如需要）
    // 错误说明（如需要）
    
  示例：
    // Connect 连接到指定节点。
    //
    // 如果已存在连接，返回现有连接。
    // 返回 ErrTimeout 如果连接超时。
```

---

## 设计文档

### 结构规范

```
设计文档结构：

  # 文档标题
  
  ## 元数据
  日期、作者、状态
  
  ## 概述
  问题背景和目标
  
  ## 设计
  详细设计方案
  
  ## 替代方案
  考虑过的其他方案
  
  ## 影响
  对现有系统的影响
  
  ## 相关文档
  链接
```

### ADR 格式

```
ADR 结构：

  ## 元数据
  ID、状态、日期
  
  ## 上下文
  问题背景
  
  ## 决策
  做出的决策
  
  ## 后果
  正面和负面后果
```

---

## Markdown 规范

### 格式规则

| 规则 | 说明 |
|------|------|
| 标题层级 | 从 # 开始，不跳级 |
| 列表缩进 | 2 或 4 空格 |
| 代码块 | 使用围栏格式 |
| 链接 | 使用相对路径 |

### 图表规范

```
图表使用规范：

  Mermaid：
    • 流程图：flowchart
    • 时序图：sequenceDiagram
    • 状态图：stateDiagram
    
  ASCII 图：
    • 简单结构
    • 表格形式
```

### 表格规范

```
表格格式：

  | 列1 | 列2 | 列3 |
  |-----|-----|-----|
  | 值1 | 值2 | 值3 |
  
  对齐：
    :--- 左对齐
    :---: 居中
    ---: 右对齐
```

---

## 版本记录

### 变更日志

```
变更日志格式：

  ## 变更历史
  
  | 日期 | 版本 | 变更说明 |
  |------|------|----------|
  | 2026-01-11 | 1.0 | 初始版本 |
```

### 更新说明

```
更新说明规范：

  文档末尾：
    **最后更新**：YYYY-MM-DD
```

---

## 链接规范

### 内部链接

```
内部链接规范：

  同目录：
    [文档名](filename.md)
    
  子目录：
    [文档名](subdir/filename.md)
    
  父目录：
    [文档名](../filename.md)
```

### 锚点链接

```
锚点链接规范：

  同文档：
    [章节名](#章节名)
    
  其他文档：
    [章节名](filename.md#章节名)
```

---

## 检查工具

### 工具配置

| 工具 | 用途 |
|------|------|
| markdownlint | 格式检查 |
| markdown-link-check | 链接检查 |
| cspell | 拼写检查 |

### CI 集成

```
CI 文档检查：

  1. markdownlint 格式检查
  2. 链接有效性检查
  3. 拼写检查
```

---

## 验证清单

| 检查项 | 说明 |
|--------|------|
| README 完整 | 包含必备章节 |
| 注释完整 | 导出 API 有注释 |
| 链接有效 | 无死链 |
| 格式正确 | 通过 lint 检查 |

---

## 相关文档

- [代码规范](code_standards.md)
- [命名规范](naming_conventions.md)
- [设计文档目录](../../../)

---

**最后更新**：2026-01-11
