# 场景约束 (Scenarios)

> 定义 DeP2P 在典型应用场景下的使用约束和最佳实践

---

## 概述

场景约束将应用需求转化为可执行的 DeP2P 使用指南，帮助开发者快速理解如何在特定场景中使用 DeP2P。

```
场景约束的作用：

  应用需求 → 场景约束 → DeP2P API 映射
  
  示例：
    "需要广播消息" → 使用 PubSub
    "需要请求数据" → 使用 Messaging
    "需要隔离网络" → 使用 Realm
```

---

## 目录结构

```
scenarios/
├── README.md          # 本文件 - 场景约束索引
└── overview.md        # 典型场景概览
```

---

## 场景类型

DeP2P 适用于以下典型场景：

| 场景类型 | 核心需求 | DeP2P 服务 |
|----------|----------|-----------|
| **分布式应用** | 广播、同步 | PubSub + Messaging |
| **即时通讯** | 群聊、私聊 | PubSub + Messaging |
| **物联网** | 发现、遥测 | Discovery + PubSub |
| **文件共享** | 传输、发现 | Streams + DHT |
| **区块链/DLT** | 广播、隔离 | PubSub + Realm |

---

## 服务选择指南

### 消息传递选择

```
需要广播吗？
  │
  ├── 是 → PubSub
  │        适合：区块广播、群聊、事件通知
  │
  └── 否 → 需要响应吗？
           │
           ├── 是 → Messaging (Request-Response)
           │        适合：RPC、数据请求
           │
           └── 否 → Messaging (Notify)
                    适合：私聊、单向通知
```

### 大数据传输

```
数据量大吗？
  │
  ├── 是 → Streams (双向流)
  │        适合：文件传输、批量同步
  │
  └── 否 → Messaging
           适合：小数据请求响应
```

### 网络隔离

```
需要隔离吗？
  │
  ├── 是 → Realm + PSK
  │        适合：多租户、测试环境
  │
  └── 否 → 系统层协议
           适合：公开网络
```

---

## 场景文档

| 文档 | 内容 |
|------|------|
| [overview.md](overview.md) | 典型场景概览和服务映射 |

---

## 与协议规范的关系

```
┌─────────────────────────────────────────────────────────────┐
│                     文档层次关系                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  protocol/           技术规范（怎么实现）                    │
│  ────────────────────────────────────────                   │
│  定义协议格式、消息结构、状态机                              │
│                                                             │
│  scenarios/          应用约束（怎么用）                      │
│  ────────────────────────────────────────                   │
│  定义场景需求、服务映射、最佳实践                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 相关文档

- [协议规范](../protocol/) - 技术实现细节
- [L4 应用层](../protocol/L4_application/) - PubSub/Messaging/Realm 规范
- [工程标准](../engineering/) - 开发规范

---

**最后更新**：2026-01-11
